extern crate regex;
use regex::Regex;

pub struct LexicalUnit {
    name : String,
    regex : Regex,
}

// All lexical units statically are defined here.

{% for lu in lexical_units %}
    static LexicalUnit{{lu.name | capitalize}}: LexicalUnit = LexicalUnit {
        name: "{{lu.name}}".to_owned(),
        regex: Regex::new("{{lu.regex}}"),
    };
{% endfor %}

{% for p in production_rules %}
    pub trait Rule{{p | capitalize}} {
        fn On{{p | capitalize}}(context : &mut {{p | capitalize}}Context);
    }
{% endfor %}
